<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë³‘ì› ì˜ˆì•½ ê´€ë¦¬ ì‹œìŠ¤í…œ v1.0</title>
    <style>
        /* 2000ë…„ëŒ€ Retro OS ìŠ¤íƒ€ì¼ */
        body { 
            font-family: 'Gulim', 'êµ´ë¦¼', sans-serif; 
            background-color: #008080; /* í´ë˜ì‹ ìœˆë„ìš° ë°°ê²½ìƒ‰ */
            display: flex; 
            justify-content: center; 
            padding: 20px;
            margin: 0;
        }
        
        .container { display: flex; gap: 15px; max-width: 1000px; width: 100%; }
        
        /* ìœˆë„ìš° ì°½ ë””ìì¸ */
        .window { 
            background: #c0c0c0; 
            border: 2px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            padding: 3px;
            box-shadow: 2px 2px 0px rgba(0,0,0,0.5);
        }

        .title-bar {
            background: linear-gradient(90deg, #000080, #1084d0);
            color: white;
            padding: 3px 10px;
            font-weight: bold;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .window-body { padding: 15px; }
        
        h2 { font-size: 14px; margin: 0 0 10px 0; color: #000; }
        
        label { display: block; margin-top: 10px; font-size: 12px; color: #000; }
        
        /* ê³ ì „ì ì¸ ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ */
        input, select { 
            width: 100%; 
            padding: 4px; 
            margin-top: 2px; 
            border: 2px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            background: white;
            font-size: 12px;
            box-sizing: border-box;
        }
        
        /* 90-00ë…„ëŒ€ì‹ ë²„íŠ¼ */
        .btn-submit { 
            width: 100%; 
            padding: 6px; 
            background: #c0c0c0; 
            border: 2px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            cursor: pointer; 
            margin-top: 20px; 
            font-size: 12px;
            font-weight: bold;
        }
        .btn-submit:active {
            border-color: #808080 #ffffff #ffffff #808080;
            padding: 7px 5px 5px 7px;
        }

        /* ë¦¬ìŠ¤íŠ¸ ì˜ì—­ */
        .list-box { flex: 2; }
        
        table { 
            width: 100%; 
            border-collapse: collapse; 
            background: white; 
            border: 2px solid #808080;
        }
        
        th { 
            background: #c0c0c0; 
            color: black; 
            padding: 5px; 
            font-size: 12px; 
            border: 1px solid #808080;
            text-align: center;
        }
        
        td { 
            padding: 5px; 
            border: 1px solid #dfdfdf; 
            font-size: 12px; 
            color: #000; 
        }

        /* ìƒíƒœ í…ìŠ¤íŠ¸ (ë°°ì§€ ëŒ€ì‹  í…ìŠ¤íŠ¸ ê°•ì¡°) */
        .status { font-weight: bold; font-size: 11px; }
        .status-booked { color: #0000ff; }
        .status-canceled { color: #ff0000; }
        .status-completed { color: #008000; }
        
        .id-badge { color: #666; font-size: 10px; }
    </style>
</head>
<body>

<div class="container">
    <div class="window" style="flex: 1; height: fit-content;">
        <div class="title-bar">
            <span>ì˜ˆì•½ ë“±ë¡.exe</span>
            <span>? X</span>
        </div>
        <div class="window-body">
            <h2>ğŸ¥ ì§„ë£Œ ì˜ˆì•½ ì…ë ¥</h2>
            <hr>
            <label>í™˜ìëª… ì„ íƒ(P)</label>
            <select id="patientSelect">
                <option value="101">ê¹€ì² ìˆ˜</option>
                <option value="102">ì´ì˜í¬</option>
                <option value="103">ë°•ë¯¼ìˆ˜</option>
                <option value="105" selected>ìµœë‹¤ì¸</option>
            </select>

            <label>ë‹´ë‹¹ ì˜ì‚¬ ì„ íƒ(D)</label>
            <select id="doctorSelect">
                <option value="1">ê¹€ë‹¥í„° (ë‚´ê³¼)</option>
                <option value="2">ì´ë‹¥í„° (ì™¸ê³¼)</option>
                <option value="5">ë°•ë‹¥í„° (ì†Œì•„ê³¼)</option>
                <option value="7" selected>ì •ë‹¥í„° (í”¼ë¶€ê³¼)</option>
            </select>

            <label>ì˜ˆì•½ ì¼ì‹œ(T)</label>
            <input type="datetime-local" id="appDate">

            <label>ì§„ë£Œ ìƒíƒœ(S)</label>
            <select id="situation">
                <option value="ì˜ˆì•½">ì˜ˆì•½</option>
                <option value="ì·¨ì†Œ">ì·¨ì†Œ</option>
                <option value="ì§„ë£Œì™„ë£Œ">ì§„ë£Œì™„ë£Œ</option>
            </select>

            <button class="btn-submit" onclick="addAppointment()">í™•ì¸(O)</button>
        </div>
    </div>

    <div class="window list-box">
        <div class="title-bar">
            <span>ì˜ˆì•½ í˜„í™© ëª©ë¡ - [ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸]</span>
            <span>_ â–¡ X</span>
        </div>
        <div class="window-body">
            <table id="mainGrid">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>í™˜ìì„±ëª…</th>
                        <th>ë‹´ë‹¹ì˜</th>
                        <th>ì˜ˆì•½ì‹œê°„</th>
                        <th>ìƒíƒœ</th>
                    </tr>
                </thead>
                <tbody id="appointmentTable"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    const patientNames = { "101": "ê¹€ì² ìˆ˜", "102": "ì´ì˜í¬", "103": "ë°•ë¯¼ìˆ˜", "105": "ìµœë‹¤ì¸" };
    const doctorNames = { "1": "ê¹€ë‹¥í„°", "2": "ì´ë‹¥í„°", "5": "ë°•ë‹¥í„°", "7": "ì •ë‹¥í„°" };

    let virtualDB = [
        { app_id: 1, patient_id: 101, doctor_id: 2, app_date: "2024-05-20 10:30", situation: "ì§„ë£Œì™„ë£Œ" },
        { app_id: 2, patient_id: 102, doctor_id: 1, app_date: "2024-05-21 14:00", situation: "ì˜ˆì•½" },
        { app_id: 3, patient_id: 103, doctor_id: 5, app_date: "2024-05-21 16:30", situation: "ì·¨ì†Œ" }
    ];

    window.onload = function() {
        const now = new Date();
        now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
        document.getElementById('appDate').value = now.toISOString().slice(0, 16);
        renderTable();
    };

    function renderTable() {
        const tbody = document.getElementById('appointmentTable');
        tbody.innerHTML = "";

        virtualDB.forEach(row => {
            let statusClass = "";
            if (row.situation === "ì˜ˆì•½") statusClass = "status-booked";
            else if (row.situation === "ì·¨ì†Œ") statusClass = "status-canceled";
            else if (row.situation === "ì§„ë£Œì™„ë£Œ") statusClass = "status-completed";

            const pName = patientNames[row.patient_id];
            const dName = doctorNames[row.doctor_id];

            const tr = `<tr>
                <td align="center">${row.app_id}</td>
                <td>${pName} <span class="id-badge">(#${row.patient_id})</span></td>
                <td>${dName}</td>
                <td>${row.app_date}</td>
                <td align="center"><span class="status ${statusClass}">${row.situation}</span></td>
            </tr>`;
            tbody.innerHTML += tr;
        });
    }

    function addAppointment() {
        const pId = document.getElementById('patientSelect').value;
        const dId = document.getElementById('doctorSelect').value;
        const date = document.getElementById('appDate').value.replace('T', ' ');
        const sit = document.getElementById('situation').value;

        const nextId = virtualDB.length > 0 ? virtualDB[virtualDB.length - 1].app_id + 1 : 1;
        
        virtualDB.push({
            app_id: nextId, patient_id: pId, doctor_id: dId, app_date: date, situation: sit
        });

        renderTable();
        alert("ë°ì´í„°ë² ì´ìŠ¤ì— ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
    }
</script>

</body>
</html>
